# SNMP_int_project
This project is designed to collect interfaces
that have not been used in at least 90 days, and
provide this information to a database for later
retreival.

NOTE - You will need to add the MYSQL SERVER IP to Main.py, as well as update the .ini file directory.

## Stage 1 - Index Report
- First, this script attempts an snmp uptime check for every switch in the "interface_buildings" function from cisco_devices.py. If the switch has been live for more than 90 days, it is viable for port reclaim. If it is less than 90, or does not connect, it is skipped. (**See [snmpEngineTime](https://snmp.cloudapps.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=1.3.6.1.6.3.10.2.1.3&translate=Translate&submitValue=SUBMIT&submitClicked=true)**)
- It then gathers an snmp table for Inoctet data. This is filtered for interfaces that have a value of zero. (**See [ifInoctets](https://snmp.cloudapps.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=1.3.6.1.2.1.2.2.1.10&translate=Translate&submitValue=SUBMIT)**)
- A secondary snmp table for inventory is gathered, and then filtered for interfaces with "Ethernet" in the value. (**See [ifDescr](https://snmp.cloudapps.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=1.3.6.1.2.1.2.2.1.2&translate=Translate&submitValue=SUBMIT&submitClicked=true)**)
- These two tables are thrown together to make a final list of interfaces that have a zero Inoctet value, for each switch.
- Everything is exported into index_report.json for importing later. This file contains switch, index number, and interface name data.

## Stage 2 - Desc Scraping
- This stage imports the index_report.json file and for each switch it gathers an snmp table for the interface description value. (**See [ifAlias](https://snmp.cloudapps.cisco.com/Support/SNMP/do/BrowseOID.do?objectInput=1.3.6.1.2.1.31.1.1.1.18&translate=Translate&submitValue=SUBMIT&submitClicked=true)**)
- This table is filtered through the index reports list of interfaces, and appended to a new dictionary. If there is no description for the interface a value of "NO DESC" is added.
- New dictionary is returned and after all switches are gathered, everything is exported to int_report.json.

## Stage 3 - Database Export
- At this stage, the program connects to the database, and drops/creates an index_table for each switch in index_report.json. This contains the interface index number and interface name (i.e GigabitEthernet1/11). It then fills the table with data collected from index_report.json
- It then creates a secondary desc_table for each switch, containing the switch, index number (referenced against the index_table), interface description, and date (autogenerated on INSERT).
- Finally, a final table is compiled from each switch's index/desc tables, containing switch, interface name, description, and date. an "id" column is autogenerated on INSERT, for use with Django's Web Framework. This table is created to make querying easier.
